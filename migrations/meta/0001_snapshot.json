{
  "id": "8b859cff-c42e-4e0d-aefe-edefa9253ab4",
  "prevId": "0e282391-bd5d-4beb-bbef-b45398d9e753",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.business_contexts": {
      "name": "business_contexts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "entity_name": {
          "name": "entity_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "industry": {
          "name": "industry",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "aliases": {
          "name": "aliases",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "related_entities": {
          "name": "related_entities",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "technology_portfolio": {
          "name": "technology_portfolio",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "service_details": {
          "name": "service_details",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "key_contacts": {
          "name": "key_contacts",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_entity_name": {
          "name": "idx_entity_name",
          "columns": [
            {
              "expression": "entity_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_entity_type": {
          "name": "idx_entity_type",
          "columns": [
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_is_active": {
          "name": "idx_is_active",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "business_contexts_entity_name_unique": {
          "name": "business_contexts_entity_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "entity_name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.case_contexts": {
      "name": "case_contexts",
      "schema": "",
      "columns": {
        "case_number": {
          "name": "case_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "thread_ts": {
          "name": "thread_ts",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "channel_id": {
          "name": "channel_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "channel_name": {
          "name": "channel_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "channel_topic": {
          "name": "channel_topic",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "channel_purpose": {
          "name": "channel_purpose",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_resolved": {
          "name": "is_resolved",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "detected_at": {
          "name": "detected_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_updated": {
          "name": "last_updated",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "notified": {
          "name": "notified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "indexes": {
        "idx_resolved": {
          "name": "idx_resolved",
          "columns": [
            {
              "expression": "is_resolved",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "notified",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_case_number": {
          "name": "idx_case_number",
          "columns": [
            {
              "expression": "case_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_last_updated": {
          "name": "idx_last_updated",
          "columns": [
            {
              "expression": "last_updated",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "case_contexts_case_number_thread_ts_pk": {
          "name": "case_contexts_case_number_thread_ts_pk",
          "columns": [
            "case_number",
            "thread_ts"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.case_messages": {
      "name": "case_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "case_number": {
          "name": "case_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "thread_ts": {
          "name": "thread_ts",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "message_text": {
          "name": "message_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "message_timestamp": {
          "name": "message_timestamp",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_case_thread": {
          "name": "idx_case_thread",
          "columns": [
            {
              "expression": "case_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "thread_ts",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_timestamp": {
          "name": "idx_timestamp",
          "columns": [
            {
              "expression": "message_timestamp",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.kb_generation_states": {
      "name": "kb_generation_states",
      "schema": "",
      "columns": {
        "case_number": {
          "name": "case_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "thread_ts": {
          "name": "thread_ts",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "channel_id": {
          "name": "channel_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "state": {
          "name": "state",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "attempt_count": {
          "name": "attempt_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "user_responses": {
          "name": "user_responses",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "assessment_score": {
          "name": "assessment_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "missing_info": {
          "name": "missing_info",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_updated": {
          "name": "last_updated",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_state": {
          "name": "idx_state",
          "columns": [
            {
              "expression": "state",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_last_updated_state": {
          "name": "idx_last_updated_state",
          "columns": [
            {
              "expression": "last_updated",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "kb_generation_states_case_number_thread_ts_pk": {
          "name": "kb_generation_states_case_number_thread_ts_pk",
          "columns": [
            "case_number",
            "thread_ts"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}