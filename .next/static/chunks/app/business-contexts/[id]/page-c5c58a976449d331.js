(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[754],{7667:function(e,t,s){Promise.resolve().then(s.bind(s,9732))},9732:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var n=s(539),a=s(9856),o=s(5998),c=s(8935),r=s(7936),i=s(2999),l=s(8344);let d=(0,s(2897).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function x(){let e=(0,o.useRouter)(),t=(0,o.useParams)().id,[s,x]=(0,a.useState)(null),[u,h]=(0,a.useState)(!0),[m,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{p()},[t]);let p=async()=>{try{h(!0),f(null);let e=await fetch("/api/business-contexts/".concat(t));if(!e.ok)throw Error("Failed to fetch context");let s=await e.json();x(s)}catch(e){f(e instanceof Error?e.message:"Failed to load context"),console.error("Error fetching context:",e)}finally{h(!1)}},y=async s=>{try{if(!(await fetch("/api/business-contexts/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw Error("Failed to update context");e.push("/business-contexts")}catch(e){console.error("Error updating context:",e),alert("Failed to update context. Please try again.")}},j=async()=>{if(confirm("Are you sure you want to delete this context? This action cannot be undone."))try{if(!(await fetch("/api/business-contexts/".concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete context");e.push("/business-contexts")}catch(e){console.error("Error deleting context:",e),alert("Failed to delete context. Please try again.")}};return u?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,n.jsx)(i.Z,{className:"h-8 w-8 animate-spin text-primary"})}):m||!s?(0,n.jsxs)("div",{className:"max-w-4xl mx-auto space-y-4",children:[(0,n.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-destructive mb-2",children:"Error Loading Context"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:m||"Context not found"})]}),(0,n.jsx)(r.z,{onClick:()=>e.push("/business-contexts"),children:"Back to Contexts"})]}):(0,n.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(r.z,{variant:"ghost",size:"icon",onClick:()=>e.back(),children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Edit Business Context"}),(0,n.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Update information for ",s.entityName]})]})]}),(0,n.jsxs)(r.z,{variant:"destructive",onClick:j,children:[(0,n.jsx)(d,{className:"mr-2 h-4 w-4"}),"Delete"]})]}),(0,n.jsx)(c.t,{context:s,onSubmit:y,onCancel:()=>{e.push("/business-contexts")}})]})}}},function(e){e.O(0,[414,101,935,684,651,744],function(){return e(e.s=7667)}),_N_E=e.O()}]);